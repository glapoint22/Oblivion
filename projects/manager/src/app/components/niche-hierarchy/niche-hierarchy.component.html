<div class="backdrop hide" [ngClass]="{'show': show}" (transitionend)="onHide()"></div>

<div #base
     class="base translate-start"
     [ngClass]="{'translate-end': show}"
     (transitionend)="onHide()"
     (mouseenter)="overNicheHierarchy.next(true)"
     (mouseleave)="overNicheHierarchy.next(false)">
    
    <div class="bar">

        <!-- Search icon -->
        <button style="margin-left: 0;" class="icon-button" (click)="toggleSearch()">
            <i *ngIf="!showSearch" style="pointer-events: none;" class="fas fa-search"></i>
            <i *ngIf="showSearch" class="fa fa-list"></i>
        </button>

        <div class="icons">

            <!-- Delete icon -->
            <button class="icon-button"
                    [ngClass]="{'icon-button-disabled': hierarchyUpdate.deleteDisabled}"
                    (mouseover)="hierarchy.overButton = true"
                    (mouseout)="hierarchy.overButton = false"
                    (click)="hierarchy.delete()"
                    [disabled]="hierarchyUpdate.deleteDisabled">
                <i style="pointer-events: none;" class="fas fa-trash-alt"></i>
            </button>
    
            <!-- Edit icon -->
            <button class="icon-button"
                    [ngClass]="{'icon-button-disabled': hierarchyUpdate.editDisabled}"
                    (mouseover)="hierarchy.overButton = true"
                    (mouseout)="hierarchy.overButton = false"
                    (click)="hierarchy.edit()"
                    [disabled]="hierarchyUpdate.editDisabled">
                <i style="pointer-events: none;" class="fas fa-pencil-alt"></i>
            </button>
    
            <!-- Add icon -->
            <button class="icon-button"
                    [ngClass]="{'icon-button-disabled': hierarchyUpdate.addDisabled}"
                    (mouseover)="hierarchy.overButton = true"
                    (mouseout)="hierarchy.overButton = false"
                    (click)="hierarchy.add(null!, isParent)"
                    [disabled]="hierarchyUpdate.addDisabled">
                <i style="pointer-events: none;" class="fas fa-plus-circle"></i>
            </button>

            <!-- Collapse icon -->
            <button class="icon-button">
                <i style="pointer-events: none;" class="fas fa-minus-square"></i>
            </button>
        </div>
    </div>
    <div class="drop-shadow"></div>


    <div class="hierarchy-container" [style.height.px]="base.clientHeight - 40">
        <input id="searchInput" *ngIf="showSearch" placeholder="Search">
        <hierarchy #hierarchy *ngIf="!showSearch" [sourceList]="nicheHierarchyService.niches" [options]="hierarchyOptions" (onListUpdate)="hierarchyUpdate = $event"></hierarchy>
    </div>
</div>