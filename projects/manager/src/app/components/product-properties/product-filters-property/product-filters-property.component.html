<panel [title]="'Filters'"
       (onOpen)="productFiltersManager.onOpen()">
       
    <div class="property-box-dark">

        <!-- Property Box Bar -->
        <div class="property-box-bar">

            <!-- Search icon -->
            <icon-button class="search-icon-button"
                         [icon]="productFiltersManager.searchIcon"
                         [title]="productFiltersManager.searchIconButtonTitle"
                         [isDisabled]="false"
                         (onOver)="productFiltersManager.overButton = $event"
                         (onClick)="productFiltersManager.toggleSearch()">
            </icon-button>

            <div class="icons">
                <!-- Delete icon -->
                <icon-button [icon]="'fas fa-trash-alt'"
                             [title]="productFiltersManager.deleteIconButtonTitle"
                             [isDisabled]="productFiltersManager.isDisabled('deleteDisabled')"
                             (onOver)="productFiltersManager.overButton = $event"
                             (onClick)="productFiltersManager.delete()">
                </icon-button>

                <!-- Edit icon -->
                <icon-button [icon]="'fas fa-pencil-alt'"
                             [title]="productFiltersManager.editIconButtonTitle"
                             [isDisabled]="productFiltersManager.isDisabled('editDisabled')"
                             (onOver)="productFiltersManager.overButton = $event"
                             (onClick)="productFiltersManager.edit()">
                </icon-button>

                <ng-container *ngIf="!productFiltersManager.searchMode">
                    <!-- Add icon -->
                    <icon-button [icon]="'fas fa-plus-circle'"
                                 [title]="productFiltersManager.addIconButtonTitle"
                                 [isDisabled]="productFiltersManager.isDisabled('addDisabled')"
                                 (onOver)="productFiltersManager.overButton = $event"
                                 (onClick)="productFiltersManager.add()">
                    </icon-button>
    
                    <!-- Collapse icon -->
                    <icon-button [icon]="'fas fa-minus-square'"
                                 [title]="'Collapse'"
                                 [isDisabled]="productFiltersManager.isDisabled('collapseDisabled')"
                                 (onOver)="productFiltersManager.overButton = $event"
                                 (onClick)="productFiltersManager.collapse()">
                    </icon-button>
                </ng-container>
            </div>
        </div>
        
        <!-- Hierarchy -->
        <ng-container *ngIf="!productFiltersManager.searchMode">
            <checkbox-hierarchy #hierarchyComponent
                                [sourceList]="productFiltersManager.thisArray"
                                [options]="productFiltersManager.listOptions"
                                (onListUpdate)="productFiltersManager.listUpdate = $event">
            </checkbox-hierarchy>
        </ng-container>

        <!-- Search -->
        <ng-container *ngIf="productFiltersManager.searchMode">
            
            <input id="productFiltersSearchInput"
                    placeholder="Search"
                    (input)="productFiltersManager.onSearchInputChange($event.target)">

            <div class="column-name-container">
                <div class="column-name">Name</div>
                <div class="column-name">Type</div>
            </div>

            <div class="column-underline-container">
                <div class="column-underline"></div>
                <div class="column-underline"></div>
            </div>


            <ng-container *ngIf="productFiltersManager.thisSearchList.length == 0">
                <div class="no-search-results">
                    No search results available
                </div>
            </ng-container>
            

            <ng-container *ngIf="productFiltersManager.thisSearchList.length > 0">
                <checkbox-multi-column-list #searchComponent
                                    [parentSearchType]="productFiltersManager.parentSearchType"
                                   [sourceList]="productFiltersManager.thisSearchList"
                                   [options]="productFiltersManager.searchOptions"
                                   (onListUpdate)="productFiltersManager.searchUpdate = $event">
                </checkbox-multi-column-list>
            </ng-container>
        </ng-container>
    </div>
</panel>