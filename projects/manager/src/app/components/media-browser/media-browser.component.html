<div class="hide modal-backdrop" [ngClass]="{'show': show}" (transitionend)="onHide()">

    <div class="modal-base">
        <div class="modal-bar">
            <div>Media Browser</div>
            <div class="modal-x-button" (click)="close()">
                X
            </div>
        </div>
        <div class="modal-bar-drop-shadow"></div>

        <div class="modal-content">
            <input #searchInput style="margin-bottom: 20px; border-radius: 25px;" (input)="search(searchInput.value)"
                [placeholder]="currentMediaType == mediaType.Image ? 'Search for an image' : 'Search for a video'">

            <div *ngIf="showAllMedia" style="width: 590px; margin: auto; margin-top: 20px; display: flex;">
                <div style="background: #222222; height: 20px; color: #d1d1d1; padding: 2px 10px 0">Images</div>
                <div style="background: #222222; height: 20px; color: #d1d1d1; padding: 2px 10px 0">Videos</div>

            </div>


            <!-- Media Type - Image -->
            <div *ngIf="currentMediaType == mediaType.Image && !inSearchMode && !localImage" class="backdrop"
                style="padding: 20px;">

                <div (dragover)="onDragover($event)" (drop)="onDrop($event)"
                    [style.background]="dragover ? '#333333': null" (dragleave)="dragover = false"
                    class="content-container">

                    <div class="content-heading">Choose an Image</div>
                    <div class="message">Drag & drop an image here, type in the search field above, or click to upload.
                    </div>

                    <!-- Button -->
                    <div class="upload-button" [style.pointerEvents]="dragover ? 'none': 'all'"
                        (click)="onUploadImageClick(fileInput)">
                        <i class="fa-solid fa-upload"></i>
                    </div>


                    <input #fileInput type="file" accept=".jpg, .png, .bmp"
                        (change)="setLocalImage(fileInput.files![0])">

                </div>
            </div>






            <!-- Local Image -->
            <ng-container *ngIf="localImage">
                <div class="backdrop"
                    style="flex-direction: column; height: 434px; position: relative; justify-content: flex-start;">
                    <div
                        style="width: 100%; height: 400px; display: flex; justify-content: center; align-items: center;">
                        <img [src]="localImage" style="max-width: 380px; max-height: 380px; object-fit: contain;">
                    </div>

                    <input id="title" #titleInput style="position: absolute; bottom: 10px; max-width: 300px;"
                        (keydown.enter)="onSubmit(titleInput.value)">
                </div>

                <!-- Button Container -->
                <div style="display: flex; justify-content: flex-end; margin-top: 10px;">
                    <button class="dark-button" (click)="onSubmit(titleInput.value)" [disabled]="!titleInput.value">
                        Submit
                    </button>
                </div>
            </ng-container>












            <!-- Media Type - Video -->
            <div *ngIf="currentMediaType == mediaType.Video && !inSearchMode" class="backdrop" style="padding: 20px;">

                <div class="content-container">
                    <div class="content-heading">Choose a video</div>
                    <div class="message">Paste a link below or type in the search field above.</div>
                    <div style="display: flex; margin-top: 10px;">
                        <input class="video-input">
                        <button class="video-input-button">Enter</button>
                    </div>
                </div>
            </div>








            <div *ngIf="inSearchMode && !noSearchResults" class="backdrop"
                style="overflow: auto; overflow-y: overlay; justify-content: flex-start; align-items: flex-start;">


                <div style="display: flex; flex-wrap: wrap; padding-bottom: 13px;">
                    <img [src]="'images/' + media.image" class="media" *ngFor="let media of searchedMedia"
                        [title]="media.name" (click)="onMediaClick(media)">
                </div>
            </div>



            <div *ngIf="noSearchResults" class="backdrop">
                <div class="content-heading">No results found</div>
            </div>
        </div>



        <!-- <div *ngIf="localImage"
                    style="margin: auto; display: flex; justify-content: center; align-items: center; width: 100%; height: 100%;">
                    <img [src]="localImage" style="max-width: 450px; max-height: 450px; object-fit: contain;">
                </div>


                <div *ngIf="!inSearchMode && !localImage"
                    style="width: 100%; height: 100%; display: flex; justify-content: center; align-items: center;">
                    <div (dragover)="onDragover($event)"  style="    width: 560px;
                    height: 445px;
                    
                    border-radius: 10px;
                    display: flex;
                    justify-content: center;
                    align-items: center; flex-direction: column">


                        <ng-container *ngIf="dragover">
                            <div (dragleave)="dragover=false;" (drop)="onDrop($event)" style="width: 100%; height: 100%; background: red;"></div>
                        </ng-container>

                        
                        




                        
                        




                    </div>
                </div> -->





    </div>
</div>